# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–æ–º

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ã—Å—Ç—Ä–æ–º—É –¥–µ–ø–ª–æ—é –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–æ–º.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É](#–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–∫-—Å–µ—Ä–≤–µ—Ä—É)
2. [–ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–±—ã—Å—Ç—Ä—ã–π-–¥–µ–ø–ª–æ–π-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
3. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å–∞–º–∏)
4. [–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö](#—Ä–∞–±–æ—Ç–∞-—Å-–±–∞–∑–æ–π-–¥–∞–Ω–Ω—ã—Ö)
5. [–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](#–∑–∞–≥—Ä—É–∑–∫–∞-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
6. [–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤](#–ø—Ä–æ—Å–º–æ—Ç—Ä-–ª–æ–≥–æ–≤)
7. [–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–æ—Ç–∫–∞—Ç-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
8. [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
9. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ß–µ—Ä–µ–∑ SSH

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç root
ssh root@your-server-ip

# –ò–ª–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è shoeapp (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω SSH –∫–ª—é—á)
ssh shoeapp@your-server-ip
```

### –ß–µ—Ä–µ–∑ WinSCP (Windows)

1. –û—Ç–∫—Ä–æ–π WinSCP
2. –•–æ—Å—Ç: `your-server-ip`
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `root` –∏–ª–∏ `shoeapp`
4. –ü–∞—Ä–æ–ª—å: (—Ç–≤–æ–π –ø–∞—Ä–æ–ª—å)
5. –ü–æ–¥–∫–ª—é—á–∏—Å—å

**–ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `/home/shoeapp/Perm_shop/`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (–ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –≤ Git):**

```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main

# 2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π
ssh shoeapp@your-server-ip "bash /home/shoeapp/Perm_shop/deploy.sh"
```

**–ò–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞–ø—Ä—è–º—É—é:**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh shoeapp@your-server-ip

# –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
bash /home/shoeapp/Perm_shop/deploy.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh shoeapp@your-server-ip

# 2. –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /home/shoeapp/Perm_shop

# 3. –ê–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source .venv/bin/activate

# 4. –ü–æ–ª—É—á–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git
git pull origin main

# 5. –û–±–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å requirements.txt)
pip install --upgrade pip
pip install -r requirements.txt

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å
sudo systemctl restart shoeapp

# 7. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status shoeapp
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ –∫–æ–¥–∞ (–±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

```bash
ssh shoeapp@your-server-ip "cd /home/shoeapp/Perm_shop && source .venv/bin/activate && git pull origin main && sudo systemctl restart shoeapp"
```

---

## ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### ‚ö†Ô∏è –í–∞–∂–Ω–æ: –†–∞–±–æ—Ç–∞ –≤ —Ñ–æ–Ω–µ

**–î–∞, –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å Putty!** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ systemd –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç SSH —Å–µ—Å—Å–∏–∏.

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω `systemctl enable shoeapp`)
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
- –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å Putty –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- –°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω 24/7

**–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç)
sudo systemctl status shoeapp

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Active: active (running)"
```

### FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (shoeapp)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status shoeapp

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl start shoeapp

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo systemctl stop shoeapp

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart shoeapp

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
sudo systemctl reload shoeapp

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
sudo systemctl enable shoeapp

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl disable shoeapp

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u shoeapp -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
sudo journalctl -u shoeapp -n 100
```

### Nginx

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart nginx

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
sudo systemctl reload nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
sudo nginx -t

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo tail -f /var/log/nginx/shoeapp_error.log
sudo tail -f /var/log/nginx/shoeapp_access.log
```

---

## üíæ –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—É—Ç—å –∫ –ë–î
/home/shoeapp/Perm_shop/instance/shop.db
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

```bash
# –í—Ä—É—á–Ω—É—é
cp /home/shoeapp/Perm_shop/instance/shop.db /home/shoeapp/Perm_shop/instance/shop.db.backup.$(date +%Y%m%d_%H%M%S)

# –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
bash /home/shoeapp/Perm_shop/backup_db.sh
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo systemctl stop shoeapp

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –ë–î
cp /home/shoeapp/Perm_shop/instance/shop.db.backup.YYYYMMDD_HHMMSS /home/shoeapp/Perm_shop/instance/shop.db

# –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo systemctl start shoeapp
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ë–î

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ sqlite3 (–µ—Å–ª–∏ –Ω–µ—Ç)
sudo apt install -y sqlite3

# –û—Ç–∫—Ä–æ–π –ë–î
sqlite3 /home/shoeapp/Perm_shop/instance/shop.db

# –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã SQLite:
.tables                    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
.schema products           # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã products
SELECT * FROM products;    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
.quit                      # –í—ã–π—Ç–∏
```

---

## üñºÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ WinSCP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Windows)

1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ WinSCP
2. –ü–µ—Ä–µ–π–¥–∏ –≤ `/home/shoeapp/Perm_shop/static/images/products/`
3. –°–∫–æ–ø–∏—Ä—É–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –Ω—É–∂–Ω—ã–µ –ø–∞–ø–∫–∏:
   - `zimnyaya/sapogi/` - –¥–ª—è –∑–∏–º–Ω–∏—Ö —Å–∞–ø–æ–≥
   - `demisezon/botinki/` - –¥–ª—è –¥–µ–º–∏—Å–µ–∑–æ–Ω–Ω—ã—Ö –±–æ—Ç–∏–Ω–æ–∫
   - –∏ —Ç.–¥.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ rsync (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (Git Bash –∏–ª–∏ WSL)
rsync -avz --progress static/images/products/ shoeapp@your-server-ip:/home/shoeapp/Perm_shop/static/images/products/
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ scp

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
scp -r static/images/products/* shoeapp@your-server-ip:/home/shoeapp/Perm_shop/static/images/products/
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
sudo chown -R shoeapp:www-data /home/shoeapp/Perm_shop/static/images
sudo find /home/shoeapp/Perm_shop/static/images -type d -exec chmod 755 {} \;
sudo find /home/shoeapp/Perm_shop/static/images -type f -exec chmod 644 {} \;
```

---

## üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u shoeapp -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
sudo journalctl -u shoeapp -n 50

# –ó–∞ —Å–µ–≥–æ–¥–Ω—è
sudo journalctl -u shoeapp --since today

# –° –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u shoeapp --since "2024-12-25 10:00:00"

# –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
tail -f /home/shoeapp/Perm_shop/logs/app.log
tail -f /home/shoeapp/Perm_shop/logs/error.log
```

### –õ–æ–≥–∏ Nginx

```bash
# –û—à–∏–±–∫–∏
sudo tail -f /var/log/nginx/shoeapp_error.log

# –î–æ—Å—Ç—É–ø—ã
sudo tail -f /var/log/nginx/shoeapp_access.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
sudo grep -i error /var/log/nginx/shoeapp_error.log
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏

```bash
# –û–±—â–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
sudo journalctl -f

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
sudo journalctl --since "1 hour ago"
```

---

## ‚Ü©Ô∏è –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û—Ç–∫–∞—Ç –∫–æ–¥–∞ —á–µ—Ä–µ–∑ Git

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh shoeapp@your-server-ip

# 2. –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /home/shoeapp/Perm_shop

# 3. –ü–æ—Å–º–æ—Ç—Ä–∏ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline -10

# 4. –û—Ç–∫–∞—Ç–∏—Å—å –∫ –Ω—É–∂–Ω–æ–º—É –∫–æ–º–º–∏—Ç—É
git reset --hard <commit-hash>

# –ò–õ–ò –æ—Ç–∫–∞—Ç–∏—Å—å –Ω–∞ N –∫–æ–º–º–∏—Ç–æ–≤ –Ω–∞–∑–∞–¥
git reset --hard HEAD~1

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å
sudo systemctl restart shoeapp
```

### –û—Ç–∫–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Git –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤)
cd /etc/nginx/sites-available
git log shoeapp

# 2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
sudo cp /etc/nginx/sites-available/shoeapp.backup /etc/nginx/sites-available/shoeapp

# 3. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# 4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ Nginx
sudo systemctl reload nginx
```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
uptime

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
top
# –∏–ª–∏
htop  # –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

# –°–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ss -tlnp | grep :80
ss -tlnp | grep :443
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I http://permplanetaobuv.ru
curl -I https://permplanetaobuv.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
curl http://permplanetaobuv.ru/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
curl -I http://permplanetaobuv.ru/static/style.css
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
echo "=== –ü—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç ===" && ls -ld /home/shoeapp/Perm_shop && \
echo "=== –ü—Ä–∞–≤–∞ –Ω–∞ static ===" && ls -ld /home/shoeapp/Perm_shop/static && \
echo "=== –ü—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã static ===" && ls -l /home/shoeapp/Perm_shop/static/ | head -5 && \
echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ www-data ===" && sudo -u www-data test -r /home/shoeapp/Perm_shop/static/style.css && echo "‚úÖ www-data –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã" || echo "‚ùå www-data –ù–ï –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã" && \
echo "=== –ü—Ä–∞–≤–∞ –Ω–∞ –ë–î ===" && ls -l /home/shoeapp/Perm_shop/instance/shop.db 2>/dev/null || echo "–ë–î –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
```

**–ò–ª–∏ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
ls -ld /home/shoeapp/Perm_shop /home/shoeapp/Perm_shop/static && \
sudo -u www-data test -r /home/shoeapp/Perm_shop/static/style.css && echo "‚úÖ –ü—Ä–∞–≤–∞ OK" || echo "‚ùå –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞"
```

**–ï—Å–ª–∏ –ø—Ä–∞–≤–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:**
```bash
sudo chown -R shoeapp:www-data /home/shoeapp/Perm_shop/static && \
sudo find /home/shoeapp/Perm_shop/static -type d -exec chmod 755 {} \; && \
sudo find /home/shoeapp/Perm_shop/static -type f -exec chmod 644 {} \; && \
echo "‚úÖ –ü—Ä–∞–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã"
```

### –†–∞–±–æ—Ç–∞ —Å Git

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
git status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git diff

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -10

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
git remote -v
```

### –†–∞–±–æ—Ç–∞ —Å Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source /home/shoeapp/Perm_shop/.venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
pip list

# –û–±–Ω–æ–≤–∏—Ç—å pip
pip install --upgrade pip

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status shoeapp
sudo systemctl status nginx

# 2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
sudo journalctl -u shoeapp -n 50
sudo tail -20 /var/log/nginx/shoeapp_error.log

# 3. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç—ã
ss -tlnp | grep :80
ss -tlnp | grep :8002

# 4. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
sudo nginx -t
```

### –û—à–∏–±–∫–∞ 502 Bad Gateway

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo systemctl status shoeapp

# 2. –ü—Ä–æ–≤–µ—Ä—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ä—Ç 8002
ss -tlnp | grep :8002

# 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo journalctl -u shoeapp -n 50

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo systemctl restart shoeapp
```

### –û—à–∏–±–∫–∞ 403 Forbidden (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã)

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /home/shoeapp/Perm_shop/static/

# 2. –ò—Å–ø—Ä–∞–≤—å –ø—Ä–∞–≤–∞
sudo chown -R shoeapp:www-data /home/shoeapp/Perm_shop/static
sudo find /home/shoeapp/Perm_shop/static -type d -exec chmod 755 {} \;
sudo find /home/shoeapp/Perm_shop/static -type f -exec chmod 644 {} \;

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ Nginx
sudo systemctl reload nginx
```

### –û—à–∏–±–∫–∞ 500 Internal Server Error

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo journalctl -u shoeapp -n 100

# 2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -50 /home/shoeapp/Perm_shop/logs/error.log

# 3. –ü—Ä–æ–≤–µ—Ä—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
ls -la /home/shoeapp/Perm_shop/instance/shop.db

# 4. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –Ω–∞ –ë–î
sudo chown shoeapp:shoeapp /home/shoeapp/Perm_shop/instance/shop.db
sudo chmod 644 /home/shoeapp/Perm_shop/instance/shop.db
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
sudo journalctl -u shoeapp -n 100

# 2. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
cd /home/shoeapp/Perm_shop
source .venv/bin/activate
uvicorn app.main:app --host 127.0.0.1 --port 8002

# 3. –ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat /home/shoeapp/Perm_shop/.env
```

### Nginx –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# 2. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –∏—Å–ø—Ä–∞–≤—å –∏—Ö –≤
sudo nano /etc/nginx/sites-available/shoeapp

# 3. –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å–Ω–æ–≤–∞
sudo nginx -t

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏
sudo systemctl restart nginx
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

- [ ] –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git
- [ ] –ó–∞–ø—É—à–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`git push origin main`)
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ (`sudo systemctl status shoeapp`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ (`sudo journalctl -u shoeapp -n 50`)
- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
cd /home/shoeapp/Perm_shop
source .venv/bin/activate
pip install --upgrade pip
pip install --upgrade -r requirements.txt
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î —á–µ—Ä–µ–∑ cron
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–±—ç–∫–∞–ø –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00)
0 3 * * * /home/shoeapp/Perm_shop/backup_db.sh
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

- **–ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É:** `/home/shoeapp/Perm_shop/`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx:** `/etc/nginx/sites-available/shoeapp`
- **Systemd —Å–µ—Ä–≤–∏—Å:** `/etc/systemd/system/shoeapp.service`
- **–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** `sudo journalctl -u shoeapp`
- **–õ–æ–≥–∏ Nginx:** `/var/log/nginx/shoeapp_*.log`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-12-25

