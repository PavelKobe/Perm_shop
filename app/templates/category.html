{% extends "base.html" %}

{% block head_extra %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "{{ category.name }}",
  "description": "{{ meta_description }}",
  "url": "{{ request.url }}",
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {% for bc in breadcrumbs %}
      {
        "@type": "ListItem",
        "position": {{ loop.index }},
        "name": "{{ bc.name }}",
        "item": "{{ request.base_url | replace('//', '//') | replace('/$', '') }}{{ bc.url }}"
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    ]
  }
}
</script>
{% endblock %}

{% block content %}
<nav class="breadcrumbs" aria-label="–•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    {% for bc in breadcrumbs %}
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      {% if loop.last %}
        <span itemprop="name">{{ bc.name }}</span>
      {% else %}
        <a href="{{ bc.url }}" itemprop="item"><span itemprop="name">{{ bc.name }}</span></a> /
      {% endif %}
      <meta itemprop="position" content="{{ loop.index }}" />
    </li>
    {% endfor %}
  </ol>
</nav>

<section class="category-page">
  <header class="category-header">
    <span class="category-header-icon">{{ category.icon }}</span>
    <h1>{{ category.name }}</h1>
  </header>

  <p class="category-intro">
    {{ category.name }} –∏–∑ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–π –∫–æ–∂–∏ –≤ –ü–µ—Ä–º–∏. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—É–≤–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–æ–¥–µ–ª–µ–π.
  </p>

  <div class="subcategory-grid" itemscope itemtype="https://schema.org/ItemList">
    <meta itemprop="name" content="{{ category.name }}" />
    {% for subcat in category.subcategories %}
    <a 
      href="/{{ category.slug }}/{{ subcat.slug }}" 
      class="subcategory-card"
      itemprop="itemListElement" 
      itemscope 
      itemtype="https://schema.org/ListItem"
    >
      <meta itemprop="position" content="{{ loop.index }}" />
      <span class="subcategory-icon">üë¢</span>
      <span class="subcategory-name" itemprop="name">{{ subcat.name }}</span>
      <span class="subcategory-arrow">‚Üí</span>
    </a>
    {% endfor %}
  </div>
</section>
{% endblock %}
