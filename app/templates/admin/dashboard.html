{% extends "admin/base.html" %}

{% block title %}–î–∞—à–±–æ—Ä–¥{% endblock %}
{% block page_title %}–î–∞—à–±–æ—Ä–¥{% endblock %}

{% block content %}
<div class="dashboard">
  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">üë¢</div>
      <div class="stat-info">
        <span class="stat-value">{{ stats.products_count }}</span>
        <span class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</span>
      </div>
    </div>
    
    <div class="stat-card stat-new">
      <div class="stat-icon">‚ú®</div>
      <div class="stat-info">
        <span class="stat-value">{{ stats.new_count }}</span>
        <span class="stat-label">–ù–æ–≤–∏–Ω–æ–∫</span>
      </div>
    </div>
    
    <div class="stat-card stat-sale">
      <div class="stat-icon">üè∑Ô∏è</div>
      <div class="stat-info">
        <span class="stat-value">{{ stats.sale_count }}</span>
        <span class="stat-label">–°–æ —Å–∫–∏–¥–∫–æ–π</span>
      </div>
    </div>
    
    <div class="stat-card stat-promo">
      <div class="stat-icon">üî•</div>
      <div class="stat-info">
        <span class="stat-value">{{ stats.promotions_count }}</span>
        <span class="stat-label">–ê–∫—Ü–∏–π</span>
      </div>
    </div>
  </div>

  <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
  <div class="quick-actions">
    <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
    <div class="actions-grid">
      <a href="/admin/products/add" class="action-card">
        <span class="action-icon">‚ûï</span>
        <span class="action-text">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</span>
      </a>
      <a href="/admin/promotions/add" class="action-card">
        <span class="action-icon">üî•</span>
        <span class="action-text">–°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é</span>
      </a>
      <a href="/admin/products" class="action-card">
        <span class="action-icon">üìã</span>
        <span class="action-text">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</span>
      </a>
      <a href="/" class="action-card" target="_blank">
        <span class="action-icon">üåê</span>
        <span class="action-text">–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç</span>
      </a>
    </div>
  </div>

  <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–æ–≤–∞—Ä—ã -->
  {% if recent_products %}
  <div class="recent-products">
    <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>–§–æ—Ç–æ</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          {% for product in recent_products %}
          <tr>
            <td class="td-image">
              {% if product.image_url %}
              <img src="{{ product.image_url }}" alt="{{ product.name }}" class="table-image">
              {% else %}
              <div class="no-image">üì∑</div>
              {% endif %}
            </td>
            <td>
              <strong>{{ product.name }}</strong>
              {% if product.is_new %}<span class="badge badge-new">–ù–æ–≤–∏–Ω–∫–∞</span>{% endif %}
              {% if product.old_price and product.old_price > product.price %}<span class="badge badge-sale">–°–∫–∏–¥–∫–∞</span>{% endif %}
            </td>
            <td>
              {% if product.subcategory %}
                {{ product.subcategory.category.name }} / {{ product.subcategory.name }}
              {% else %}
                ‚Äî
              {% endif %}
            </td>
            <td>
              <span class="price">{{ product.price | int }} ‚ÇΩ</span>
              {% if product.old_price %}
              <span class="old-price">{{ product.old_price | int }} ‚ÇΩ</span>
              {% endif %}
            </td>
            <td>
              {% if product.is_active %}
              <span class="status status-active">–ê–∫—Ç–∏–≤–µ–Ω</span>
              {% else %}
              <span class="status status-inactive">–°–∫—Ä—ã—Ç</span>
              {% endif %}
            </td>
            <td class="td-actions">
              <a href="/admin/products/edit/{{ product.id }}" class="btn btn-sm btn-secondary">‚úèÔ∏è</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="view-all">
      <a href="/admin/products" class="btn btn-outline">–í—Å–µ —Ç–æ–≤–∞—Ä—ã ‚Üí</a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}

