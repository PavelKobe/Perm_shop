{% extends "admin/base.html" %}

{% block title %}–ê–∫—Ü–∏–∏{% endblock %}
{% block page_title %}–ê–∫—Ü–∏–∏{% endblock %}

{% block header_actions %}
<a href="/admin/promotions/add" class="btn btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ü–∏—é</a>
{% endblock %}

{% block content %}
<div class="promotions-page">
  <div class="table-container">
    {% if promotions %}
    <table class="data-table">
      <thead>
        <tr>
          <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
          <th>–°–∫–∏–¥–∫–∞</th>
          <th>–ü–µ—Ä–∏–æ–¥</th>
          <th width="80">–°—Ç–∞—Ç—É—Å</th>
          <th width="100">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody>
        {% for promo in promotions %}
        <tr>
          <td>
            <strong>{{ promo.title }}</strong>
            {% if promo.description %}
            <br><small class="text-muted">{{ promo.description[:100] }}{% if promo.description|length > 100 %}...{% endif %}</small>
            {% endif %}
          </td>
          <td>
            {% if promo.discount_text %}
            <span class="discount-badge">{{ promo.discount_text }}</span>
            {% else %}
            <span class="text-muted">‚Äî</span>
            {% endif %}
          </td>
          <td>
            {% if promo.start_date or promo.end_date %}
              {% if promo.start_date %}{{ promo.start_date.strftime('%d.%m.%Y') }}{% else %}...{% endif %}
              ‚Äî
              {% if promo.end_date %}{{ promo.end_date.strftime('%d.%m.%Y') }}{% else %}...{% endif %}
            {% else %}
              <span class="text-muted">–ë–µ—Å—Å—Ä–æ—á–Ω–æ</span>
            {% endif %}
          </td>
          <td>
            {% if promo.is_active %}
            <span class="status status-active">–ê–∫—Ç–∏–≤–Ω–∞</span>
            {% else %}
            <span class="status status-inactive">–°–∫—Ä—ã—Ç–∞</span>
            {% endif %}
          </td>
          <td class="td-actions">
            <a href="/admin/promotions/edit/{{ promo.id }}" class="btn btn-sm btn-secondary" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</a>
            <form method="post" action="/admin/promotions/delete/{{ promo.id }}" style="display:inline"
                  onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∞–∫—Ü–∏—é ¬´{{ promo.title }}¬ª?')">
              <button type="submit" class="btn btn-sm btn-danger" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="empty-state">
      <div class="empty-icon">üî•</div>
      <h3>–ê–∫—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</h3>
      <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∞–∫—Ü–∏—é –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</p>
      <a href="/admin/promotions/add" class="btn btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ü–∏—é</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

