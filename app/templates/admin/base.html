<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>{% block title %}–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %} ‚Äî –ü–ª–∞–Ω–µ—Ç–∞ –û–±—É–≤–∏</title>
  <link rel="stylesheet" href="{{ url_for('static', path='/admin.css') }}">
</head>
<body>
  <div class="admin-layout">
    <!-- –°–∞–π–¥–±–∞—Ä -->
    <aside class="admin-sidebar">
      <div class="sidebar-header">
        <a href="/admin" class="sidebar-logo">üë† –ê–¥–º–∏–Ω–∫–∞</a>
      </div>
      <nav class="sidebar-nav">
        <a href="/admin" class="nav-item {% if request.url.path == '/admin' %}active{% endif %}">
          <span class="nav-icon">üìä</span>
          <span>–î–∞—à–±–æ—Ä–¥</span>
        </a>
        <a href="/admin/products" class="nav-item {% if '/products' in request.url.path %}active{% endif %}">
          <span class="nav-icon">üë¢</span>
          <span>–¢–æ–≤–∞—Ä—ã</span>
        </a>
        <a href="/admin/promotions" class="nav-item {% if '/promotions' in request.url.path %}active{% endif %}">
          <span class="nav-icon">üî•</span>
          <span>–ê–∫—Ü–∏–∏</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <a href="/" class="nav-item" target="_blank">
          <span class="nav-icon">üåê</span>
          <span>–ù–∞ —Å–∞–π—Ç</span>
        </a>
        <a href="/admin/logout" class="nav-item logout">
          <span class="nav-icon">üö™</span>
          <span>–í—ã—Ö–æ–¥</span>
        </a>
      </div>
    </aside>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="admin-main">
      <header class="admin-header">
        <h1>{% block page_title %}–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}</h1>
        <div class="header-actions">
          {% block header_actions %}{% endblock %}
        </div>
      </header>
      
      <div class="admin-content">
        {% block content %}{% endblock %}
      </div>
    </main>
  </div>

  <script>
    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π
    function loadSubcategories(categoryId, targetSelectId, selectedValue) {
      const select = document.getElementById(targetSelectId);
      if (!select) return;
      
      select.innerHTML = '<option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>';
      
      if (!categoryId) {
        select.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
        return;
      }
      
      fetch(`/admin/api/subcategories/${categoryId}`)
        .then(response => response.json())
        .then(data => {
          select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
          data.forEach(item => {
            const option = document.createElement('option');
            option.value = item.id;
            option.textContent = item.name;
            if (selectedValue && item.id == selectedValue) {
              option.selected = true;
            }
            select.appendChild(option);
          });
        })
        .catch(() => {
          select.innerHTML = '<option value="">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</option>';
        });
    }
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>

